---
interface Props {
  title: string;
  description?: string;
  image?: string;
}

const {
  title,
  description = "MTF is an open security standard for MCP server bundles. Define compliance levels, verify security controls, and protect AI tool extensions.",
  image = "/og-image.png",
} = Astro.props;

const siteUrl = "https://mpaktrust.org";
const fullTitle =
  title === "Home"
    ? "mpak Trust Framework (MTF) - MCP Security Standard"
    : `${title} | mpak Trust Framework`;
const canonicalUrl = new URL(Astro.url.pathname, siteUrl).href;
const imageUrl = new URL(image, siteUrl).href;
const keywords =
  "MTF, mpak, MCP, MCP security, MCP server, AI security, LLM security, supply chain security, SBOM, SLSA, bundle security, tool security, prompt injection, slopsquatting";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Primary Meta Tags -->
    <title>{fullTitle}</title>
    <meta name="title" content={fullTitle} />
    <meta name="description" content={description} />
    <meta name="keywords" content={keywords} />
    <meta name="author" content="NimbleBrain" />
    <link rel="canonical" href={canonicalUrl} />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={imageUrl} />
    <meta property="og:site_name" content="mpak Trust Framework" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={canonicalUrl} />
    <meta name="twitter:title" content={fullTitle} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={imageUrl} />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <style is:global>
      :root {
        --color-bg: #0a0a0a;
        --color-surface: #141414;
        --color-border: #2a2a2a;
        --color-text: #e5e5e5;
        --color-text-muted: #888;
        --color-accent: #3b82f6;
        --color-accent-hover: #60a5fa;
        --color-success: #22c55e;
        --color-warning: #eab308;
        --color-error: #ef4444;
        --font-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, monospace;
        --font-sans: system-ui, -apple-system, sans-serif;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html {
        font-family: var(--font-sans);
        background: var(--color-bg);
        color: var(--color-text);
        line-height: 1.6;
      }

      body {
        min-height: 100vh;
      }

      a {
        color: var(--color-accent);
        text-decoration: none;
      }

      a:hover {
        color: var(--color-accent-hover);
        text-decoration: underline;
      }

      code {
        font-family: var(--font-mono);
        background: var(--color-surface);
        padding: 0.15em 0.4em;
        border-radius: 4px;
        font-size: 0.9em;
      }

      pre {
        font-family: var(--font-mono);
        background: var(--color-surface);
        padding: 1rem;
        border-radius: 8px;
        overflow-x: auto;
        border: 1px solid var(--color-border);
      }

      pre code {
        background: none;
        padding: 0;
      }
    </style>

    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-WC39NKPW");
    </script>
    <!-- End Google Tag Manager -->
  </head><body>
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-WC39NKPW"
        height="0"
        width="0"
        style="display:none;visibility:hidden"></iframe></noscript
    >
    <!-- End Google Tag Manager (noscript) -->

    <header class="header">
      <nav class="nav">
        <a href="/" class="logo">MTF</a>
        <div class="nav-links">
          <a href="/spec/0.1/">Specification</a>
          <a href="/schemas/">Schemas</a>
          <a
            href="https://github.com/NimbleBrainInc/mpak-trust-framework"
            class="github-link"
            aria-label="GitHub"
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
              ></path>
            </svg>
          </a>
        </div>
      </nav>
    </header>

    <main>
      <slot />
    </main>

    <footer class="footer">
      <div class="footer-content">
        <p>
          mpak Trust Framework is licensed under <a
            href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a
          >
        </p>
        <p class="footer-org">
          Maintained by <a href="https://nimblebrain.ai">NimbleBrain</a>
        </p>
      </div>
    </footer>

    <style>
      .header {
        border-bottom: 1px solid var(--color-border);
        padding: 1rem 2rem;
      }

      .nav {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        font-weight: 700;
        font-size: 1.25rem;
        color: var(--color-text);
        font-family: var(--font-mono);
      }

      .logo:hover {
        color: var(--color-accent);
        text-decoration: none;
      }

      .nav-links {
        display: flex;
        gap: 2rem;
      }

      .nav-links a {
        color: var(--color-text-muted);
        font-size: 0.9rem;
      }

      .nav-links a:hover {
        color: var(--color-text);
        text-decoration: none;
      }

      .github-link {
        display: flex;
        align-items: center;
      }

      .github-link svg {
        transition: color 0.2s;
      }

      .footer {
        border-top: 1px solid var(--color-border);
        padding: 2rem;
        margin-top: 4rem;
      }

      .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        text-align: center;
        color: var(--color-text-muted);
        font-size: 0.875rem;
      }

      .footer-org {
        margin-top: 0.5rem;
      }
    </style>
  </body>
</html>
